version: "3.7"
services:

  swagger:
    image: swaggerapi/swagger-ui
    network_mode:
      host
    ports:
      - 80:8080
    volumes:
      - ./services/replays/store:/openapi
    environment:
      SWAGGER_JSON: /openapi/api.yml

  generate-server:
    image: openapitools/openapi-generator-cli
    volumes:
      - ./services/replays/download:/local
    command: generate -i /local/api.yml -g go-server -o /local/server

  generate-client:
    image: openapitools/openapi-generator-cli
    volumes:
      - ./services/replays/download:/local
    command: generate -i /local/api.yml -g go -o /local/client --additional-properties=\"isGoSubmodule=true\"
